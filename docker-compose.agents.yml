version: '3.8'

services:
  monitor-db:
    build:
      context: .
      dockerfile: Dockerfile.agent
    container_name: aat-monitor-db
    command: python agents/monitor_db_server.py
    environment:
      - DB_HOST=${DB_HOST:-128.140.108.240}
      - DB_PORT=${DB_PORT:-5432}
      - DB_NAME=${DB_NAME:-trading}
      - DB_USER=${DB_USER}
      - DB_PASS=${DB_PASS}
    restart: unless-stopped
    networks:
      - aat-network

  monitor-ollama:
    build:
      context: .
      dockerfile: Dockerfile.agent
    container_name: aat-monitor-ollama
    command: python agents/monitor_ollama_server.py
    environment:
      - DB_HOST=${DB_HOST:-128.140.108.240}
      - DB_PORT=${DB_PORT:-5432}
      - DB_NAME=${DB_NAME:-trading}
      - DB_USER=${DB_USER}
      - DB_PASS=${DB_PASS}
      - OLLAMA_BASE_URL=${OLLAMA_BASE_URL:-http://168.119.122.36:11434}
      - OLLAMA_MOD_VERSION=v0.5
    restart: unless-stopped
    networks:
      - aat-network

networks:
  aat-network:
    driver: bridge
