version: '3.8'

# Linux 1 Configuration: DB Server + Monitor DB Agent
# DB runs on localhost:5432, monitor-db connects to localhost

services:
  monitor-db:
    build:
      context: .
      dockerfile: Dockerfile.agent
    container_name: aat-monitor-db
    command: python agents/monitor_db_server.py
    environment:
      - DB_HOST=localhost
      - DB_PORT=5432
      - DB_NAME=trading
      - DB_USER=${DB_USER}
      - DB_PASS=${DB_PASS}
    network_mode: host
    restart: unless-stopped
