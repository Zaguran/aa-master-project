version: '3.8'

services:
  aat-web:
    env_file:
      - /opt/aat-config/.env  # TADY: Cesta, kde to bude na Linuxu schované
    build:
      context: .
      dockerfile: web/Dockerfile
    container_name: aat-web-container
    # SÍŤOVÝ REŽIM HOST: Kontejner přestane mít vlastní izolovanou síť 
    # a začne používat přímo síť serveru (jako by v Dockeru nebyl).
    network_mode: "host" 
    restart: always
    environment:
       - PYTHONUNBUFFERED=1
      - DB_HOST=${DB_HOST:-128.140.108.240}
      - DB_PORT=${DB_PORT:-5432}
      - DB_NAME=${DB_NAME:-trading}
      - DB_USER
      - DB_PASS
      - LINUX_1_IP
      - LINUX_2_IP
      - OLLAMA_API_BASE